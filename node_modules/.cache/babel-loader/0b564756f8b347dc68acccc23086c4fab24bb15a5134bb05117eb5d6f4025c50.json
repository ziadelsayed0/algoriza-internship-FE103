{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref } from \"vue\";\nimport { useUsersStore } from \"../stores/usersStore\";\nimport { useRouter } from \"vue-router\";\nexport default {\n  name: \"Login\",\n  setup() {\n    const email = ref(\"\");\n    const password = ref(\"\");\n    const signInError = ref(\"\");\n    const router = useRouter();\n    async function logInHandler() {\n      const usersStore = useUsersStore();\n\n      // Check if the user exists\n      const currentUser = usersStore.checkUserExistence(email.value);\n      if (currentUser) {\n        // User exists, check password\n        if (currentUser.password === password.value) {\n          sessionStorage.setItem(\"loggedIn\", \"true\");\n          router.push(\"/\");\n        } else {\n          signInError.value = \"Wrong Password! Try again.\";\n        }\n      } else {\n        signInError.value = \"This email doesn't exist. Please register first.\";\n        setTimeout(() => {\n          router.push(\"/register\");\n        }, 1000);\n      }\n    }\n    return {\n      email,\n      password,\n      logInHandler,\n      signInError\n    };\n  }\n};","map":{"version":3,"names":["ref","useUsersStore","useRouter","name","setup","email","password","signInError","router","logInHandler","usersStore","currentUser","checkUserExistence","value","sessionStorage","setItem","push","setTimeout"],"sources":["C:\\Users\\AFRAAD-PC1\\Desktop\\Zoz\\algoriza-internship-FE103\\src\\components\\Login\\Login.vue"],"sourcesContent":["<template>\r\n  <div class=\"mx-auto w-[27.8vw] font-SFProDisplay mt-24\">\r\n    <h1 class=\"text-center text-[28px] font-semibold mb-10\">\r\n      Sign in\r\n    </h1>\r\n    <form @submit.prevent=\"logInHandler\">\r\n      <div class=\"mb-5\">\r\n        <label for=\"\" class=\"block font-medium text-sm\"\r\n          >Email address</label\r\n        >\r\n        <input\r\n          type=\"email\"\r\n          class=\"w-full\"\r\n          v-model=\"email\"\r\n        />\r\n      </div>\r\n      <div class=\"password\">\r\n        <label for=\"\" class=\"block font-medium text-sm\"\r\n          >Password</label\r\n        >\r\n        <input\r\n          type=\"password\"\r\n          class=\"w-full mb-5\"\r\n          v-model=\"password\"\r\n        />\r\n        <!-- <span><img src=\"../../assets/password.png\" /></span> -->\r\n      </div>\r\n      <div>\r\n        <button\r\n          class=\"bg-lightBlue px-4 py-2 text-center rounded-md text-white w-full\"\r\n        >\r\n          Sign in\r\n        </button>\r\n        <p class=\"text-xs text-red-600 font-SFProDisplay\">\r\n          {{ signInError }}\r\n        </p>\r\n      </div>\r\n      <div\r\n        class=\"block text-center mt-5 text-[#4f4f4f] text-base\"\r\n      >\r\n        <p>\r\n          Don't have an account?\r\n          <router-link\r\n            class=\"text-lightBlue\"\r\n            :to=\"{ name: 'register', path: '/register' }\"\r\n            >Register\r\n          </router-link>\r\n        </p>\r\n        <p>{{ (email, password) }}</p>\r\n      </div>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref } from \"vue\";\r\nimport { useUsersStore } from \"../stores/usersStore\";\r\nimport { useRouter } from \"vue-router\";\r\n\r\nexport default {\r\n  name: \"Login\",\r\n  setup() {\r\n    const email = ref(\"\");\r\n    const password = ref(\"\");\r\n    const signInError = ref(\"\");\r\n    const router = useRouter();\r\n\r\n    async function logInHandler() {\r\n      const usersStore = useUsersStore();\r\n\r\n      // Check if the user exists\r\n      const currentUser = usersStore.checkUserExistence(email.value);\r\n\r\n      if (currentUser) {\r\n        // User exists, check password\r\n        if (currentUser.password === password.value) {\r\n          sessionStorage.setItem(\"loggedIn\", \"true\");\r\n          router.push(\"/\");\r\n        } else {\r\n          signInError.value = \"Wrong Password! Try again.\";\r\n        }\r\n      } else {\r\n        signInError.value =\r\n          \"This email doesn't exist. Please register first.\";\r\n        setTimeout(() => {\r\n          router.push(\"/register\");\r\n        }, 1000);\r\n      }\r\n    }\r\n\r\n    return { email, password, logInHandler, signInError };\r\n  },\r\n};\r\n</script>\r\n\r\n\r\n<style scoped>\r\ninput {\r\n  padding: 11px 12px 12px;\r\n  background: #f2f2f2;\r\n  border-radius: 4px;\r\n}\r\n.password {\r\n  position: relative;\r\n}\r\n.password span {\r\n  right: 15px;\r\n  top: 35px;\r\n  position: absolute;\r\n}\r\n</style>\r\n"],"mappings":";AAuDA,SAASA,GAAE,QAAS,KAAK;AACzB,SAASC,aAAY,QAAS,sBAAsB;AACpD,SAASC,SAAQ,QAAS,YAAY;AAEtC,eAAe;EACbC,IAAI,EAAE,OAAO;EACbC,KAAKA,CAAA,EAAG;IACN,MAAMC,KAAI,GAAIL,GAAG,CAAC,EAAE,CAAC;IACrB,MAAMM,QAAO,GAAIN,GAAG,CAAC,EAAE,CAAC;IACxB,MAAMO,WAAU,GAAIP,GAAG,CAAC,EAAE,CAAC;IAC3B,MAAMQ,MAAK,GAAIN,SAAS,CAAC,CAAC;IAE1B,eAAeO,YAAYA,CAAA,EAAG;MAC5B,MAAMC,UAAS,GAAIT,aAAa,CAAC,CAAC;;MAElC;MACA,MAAMU,WAAU,GAAID,UAAU,CAACE,kBAAkB,CAACP,KAAK,CAACQ,KAAK,CAAC;MAE9D,IAAIF,WAAW,EAAE;QACf;QACA,IAAIA,WAAW,CAACL,QAAO,KAAMA,QAAQ,CAACO,KAAK,EAAE;UAC3CC,cAAc,CAACC,OAAO,CAAC,UAAU,EAAE,MAAM,CAAC;UAC1CP,MAAM,CAACQ,IAAI,CAAC,GAAG,CAAC;QAClB,OAAO;UACLT,WAAW,CAACM,KAAI,GAAI,4BAA4B;QAClD;MACF,OAAO;QACLN,WAAW,CAACM,KAAI,GACd,kDAAkD;QACpDI,UAAU,CAAC,MAAM;UACfT,MAAM,CAACQ,IAAI,CAAC,WAAW,CAAC;QAC1B,CAAC,EAAE,IAAI,CAAC;MACV;IACF;IAEA,OAAO;MAAEX,KAAK;MAAEC,QAAQ;MAAEG,YAAY;MAAEF;IAAY,CAAC;EACvD;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}